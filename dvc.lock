schema: '2.0'
stages:
  prepare:
    cmd: python src/job_post_nlp/prepare.py
    deps:
    - path: data/Jobnet.xlsx
      hash: md5
      md5: 26964e5ea3bf422d0f744b6fab9af448
      size: 13307578
    - path: src/job_post_nlp/prepare.py
      hash: md5
      md5: 9a48a96e0875d82f61013bcf2aaae241
      size: 10289
    params:
      params.yaml:
        prepare:
          settings:
            nobs: 1000
            batch_size: 50
            threads: 4
          preprocessing:
            model: da_core_news_sm
            pipeline:
            - tok2vec
            - lemmatizer
            keep_negations: true
          tdm:
            tdm_cell: binary
            ngram_n: 2
            min_df:
            - 1
            - 0.01
            - 0.01
            - 0.01
            - 0.01
    outs:
    - path: data/corpus.spacy
      hash: md5
      md5: 7432c896919b75c7f603fc63a9a12577
      size: 4987696
    - path: data/tdm.parquet
      hash: md5
      md5: 96ae8ed0eb3654efecd81b1ff1ae2ee9
      size: 9249505
  train:
    cmd: python src/job_post_nlp/train.py
    deps:
    - path: data/tdm.parquet
      hash: md5
      md5: 96ae8ed0eb3654efecd81b1ff1ae2ee9
      size: 9249505
    - path: src/job_post_nlp/train.py
      hash: md5
      md5: 2b2deb37b0d8fec18d25c2cac05c30f9
      size: 3211
    params:
      params.yaml:
        train:
          settings:
            verbose: false
            max_iter: 200
            seed: 17
          corex:
            n_topics: 50
            anchors:
            anchor_strength:
    outs:
    - path: models/corex_model.pkl
      hash: md5
      md5: d0b05203f43bbf36dbf53c33d63bd837
      size: 53408742
  evaluate:
    cmd: python src/job_post_nlp/evaluate.py
    deps:
    - path: models/corex_model.pkl
      hash: md5
      md5: d0b05203f43bbf36dbf53c33d63bd837
      size: 53408742
    - path: src/job_post_nlp/evaluate.py
      hash: md5
      md5: ede9f150c152c70aa40de714a0b36625
      size: 6040
